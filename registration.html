<!doctype html>
<html lang="en-US">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
</script>
<script type="text/template" id="attendeeRowTemplate">
	<tr>
		<td><input type="text" name="firstName[]"></td>
		<td><input type="text" name="lastName[]"></td>
		<td><input type="text" name="age[]"></td>
		<td><input type="text" name="gender[]"></td>
		<td><input type="text" name="e-mail[]"></td>
		<td><input type="text" name="phone[]"></td>
		<td><button type="button" class="removeThisAttendee">Remove</button></tr>
	</tr>
</script>
<script>
// Display the number of attendees based on how many rows the user has
// Removed or added
function updateAttendeeCount() {
	var count = $("#attendees tbody tr").length;

	$("#count").text("Attendees: " + count);
}

// Add a row to the attendees and update the count
function addAttendeeRow() {
	// brackets[] should make these inputs arrays in PHP
	// http://stackoverflow.com/questions/6631786/forms-with-a-variable-number-of-fields
	var template = $("#attendeeRowTemplate").html();
	$(template).hide().appendTo("#attendees tbody").fadeIn("slow");
	
	updateAttendeeCount();
}

$(document).ready(function(){
	/*
	$("#removeAttendee").click(function() {
		if ($("#attendees tbody tr").length > 1) {
			$("#attendees tbody > tr:last").fadeOut("slow", function(){
				$("#attendees tbody > tr:last").remove();
			});
		}
	});
	*/

	// Remove a specific row and update the count display
	$("#attendees").on("click", ".removeThisAttendee", function(){
		var deleteRow = $(this).closest("tr");

		deleteRow.fadeOut("fast", function(){
			deleteRow.remove();
			updateAttendeeCount();
		});

	});

	// Add the first row. We do this here instead of in the HTML to make
	// keeping the HTML consistent more easy.
	addAttendeeRow();
	// delete the Remove button for this first row.
	$("#attendees tbody tr:last td:last").html(' <button type="button" id="addAttendee">Add Row</button> '); 

	// Add rows to the attendee list
	// NOTE: This has to happen after we initialize the Add Button (could probably be done better).
	$("#addAttendee").click( addAttendeeRow );
});
</script>
<title>WYC Registration</title>
</head>
<body>
<!-- TODO:
	make Add Row button a template for readability
	automatically populate year
	Fill in conference title
-->
<h1>Wisconsin Youth Christ Registration</h1> 
<p>Please fill out the form below to register for <abbr title"Wisconsin Yourth Christ">WYC</abbr>.</p>

<!-- TODO - add action= for handler page-->
<br/>
<form method="post">
	<p id="count">Attendees: </p>
	<table id="attendees">
		<thead>
			<tr>
				<td>First Name</td>
				<td>Last Name</td>
				<td>Age</td>
				<td>Gender</td>
				<td>E-Mail</td>
				<td>Phone</td>
				<td> <!-- delete button --> </td>
			</tr>
		</thead>
		<tbody>
		  <!-- The actual row is added by jQuery so the HTML can be kept
				consistent more easily. -->
			<!--tr>
				<td><input type="text" name="firstName"></td>
				<td><input type="text" name="lastName"></td>
				<td><input type="text" name="age"></td>
				<td><input type="text" name="gender"></td>
				<td><input type="text" name="e-mail"></td>
				<td><input type="text" name="phone"></td>
			</tr-->
		</tbody>
	</table>
</form>

</body>
</html>
